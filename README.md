<div id="toc">
  <ul>
    <summary type="none" align="center">
      <h1 type="none">Техническое Задание</h1>
    </summary>
    <summary type="none">
      <h2>Taskly AI – продвинутый AI-планировщик, который анализирует загруженность пользователя и автоматически распределяет задачи по приоритетам, помогая эффективнее управлять временем.</h2>
    </summary>
  </ul>
</div>

---

### Общее описание
Taskly AI – это микросервисное веб-приложение для управления задачами с автоматической приоритезацией и AI-рекомендациями. Приложение поддерживает REST API и GraphQL для взаимодействия с микросервисами.

#### Основные функции
- **AI-приоритезация** – определяет важность задач и предлагает оптимальный порядок выполнения
- **Автоматические напоминания** – предсказывает, когда лучше выполнять задачу
- **Голосовые команды и чат-бот** – добавление задач через голос или текст
- **Интеграция с календарями и мессенджерами** – синхронизация с:
  - Google Calendar
  - Outlook
  - Slack
- **Аналитика продуктивности** – отчёты о выполнении задач и эффективности

#### Монетизация
- **Freemium-модель** – базовые функции бесплатны, подписка на продвинутые возможности
- Корпоративные решения для команд

#### Целевая аудитория
- IT-специалисты
- фрилансеры
- менеджеры
- студенты
- предприниматели

#### Преимущество
Интеллектуальный планировщик, который помогает не просто ставить задачи, а эффективно их выполнять, экономя время.

### Архитектурные требования
- **Архитектура**: микросервисная.
- **Взаимодействие микросервисов**: REST API, GraphQL.
- **Брокер сообщений**: Kafka.
- **Базы данных**: PostgreSQL (хранение основных данных), Cassandra (сквозное хранение), Redis (кэш).
- **Аутентификация**: LDAP.
- **Логирование**: ELK.
- **Развёртывание**: Kubernetes.

### Микросервисы
#### User Service
- Ответственность: Управление пользователями (регистрация, аутентификация, профили, роли).
- Взаимодействие: REST API.
- БД: PostgreSQL.

#### Task Management Service
- Ответственность: Управление задачами (создание, обновление, удаление, статусы, приоритеты).
- Взаимодействие: REST API, Kafka.
- БД: PostgreSQL, Redis (кэширование).

#### AI Recommendation Service
- Ответственность: Анализ и приоритизация задач с помощью AI.
- Взаимодействие: REST API, Kafka.
- БД: Cassandra.

#### Notification Service
- Ответственность: Отправка уведомлений (email, push, webhooks).
- Взаимодействие: Kafka, REST API.
- БД: PostgreSQL.

#### Logging & Monitoring Service
- Ответственность: Сбор и анализ логов.
- Взаимодействие: ELK Stack.
- БД: Elasticsearch.

### Аутентификация через LDAP
- **LDAP-сервер**: централизованное хранилище данных пользователей и их прав доступа.
- **Метод аутентификации**: пользователи проходят проверку подлинности через LDAP Directory Service.
- **SSO (Single Sign-On)**: поддержка единого входа через LDAP.
- **Гибкое управление правами**: роли пользователей управляются через группы LDAP.
- **Взаимодействие с User Service**:
  - User Service запрашивает LDAP-сервер для проверки учётных данных пользователя.
  - В случае успешной аутентификации генерируется токен доступа (JWT/OAuth2).
  - Токен передаётся в другие сервисы для авторизации действий.
  - При изменении ролей пользователей информация обновляется через синхронизацию с LDAP.

### SLI (Service Level Indicators)
- **Время отклика API**: не более 200 мс.
- **Доступность**: 99.95%.
- **Количество одновременных запросов**: 10 000 RPS.

### API Контракты и эндпоинты (OpenAPI)
#### User Service
##### Регистрация пользователя
- **POST /users/register**
  - Описание: Регистрация нового пользователя.
  - Параметры запроса:
    - **email**: строка (обязательное)
    - **password**: строка (обязательное)
    - **name**: строка (необязательное)
  - Ответ: 201 Created
    - **userId**: строка (ID нового пользователя)
  - Ошибка: 400 Bad Request (неверный формат данных)

##### Аутентификация пользователя
- **POST /users/authenticate**
  - Описание: Аутентификация пользователя и получение токена доступа.
  - Параметры запроса:
    - **email**: строка (обязательное)
    - **password**: строка (обязательное)
  - Ответ: 200 OK
    - **token**: строка (JWT токен)
  - Ошибка: 401 Unauthorized (неверные учётные данные)

#### Task Management Service
##### Создание задачи
- **POST /tasks**
  - Описание: Создание новой задачи.
  - Параметры запроса:
    - **title**: строка (обязательное)
    - **description**: строка (необязательное)
    - **dueDate**: строка (необязательное)
    - **priority**: строка (необязательное)
  - Ответ: 201 Created
    - **taskId**: строка (ID задачи)
  - Ошибка: 400 Bad Request (неверный формат данных)

##### Получение задач
- **GET /tasks**
  - Описание: Получение списка задач пользователя.
  - Параметры запроса:
    - **status**: строка (необязательное)
    - **priority**: строка (необязательное)
  - Ответ: 200 OK
    - **tasks**: массив объектов задачи
  - Ошибка: 404 Not Found (нет задач)

##### Обновление задачи
- **PUT /tasks/{taskId}**
  - Описание: Обновление задачи.
  - Параметры запроса:
    - **title**: строка (необязательное)
    - **description**: строка (необязательное)
    - **dueDate**: строка (необязательное)
    - **priority**: строка (необязательное)
  - Ответ: 200 OK
    - **taskId**: строка (ID задачи)
  - Ошибка: 404 Not Found (задача не найдена)

##### Удаление задачи
- **DELETE /tasks/{taskId}**
  - Описание: Удаление задачи.
  - Ответ: 204 No Content
  - Ошибка: 404 Not Found (задача не найдена)

#### AI Recommendation Service
##### Получение рекомендаций по задачам
- **POST /recommendations**
  - Описание: Получение рекомендаций по приоритезации задач на основе AI.
  - Параметры запроса:
    - **tasks**: массив объектов задачи (ID задачи, описание и приоритет)
  - Ответ: 200 OK
    - **recommendations**: массив объектов рекомендаций (порядок задач, новый приоритет и т.д.)
  - Ошибка: 500 Internal Server Error (ошибка в процессе обработки)

#### Notification Service
##### Отправка уведомлений
- **POST /notifications/send**
  - Описание: Отправка уведомлений пользователям (email, push, webhooks).
  - Параметры запроса:
    - **userId**: строка (обязательное)
    - **message**: строка (обязательное)
  - Ответ: 200 OK
  - Ошибка: 400 Bad Request (неверный формат данных)

### Kubernetes Deployment
- **Все сервисы завёрнуты в Docker контейнеры.**
- **Автоматическое масштабирование с HPA.**
- **Helm чарты для развёртки.**



